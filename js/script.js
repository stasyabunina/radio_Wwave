(()=>{"use strict";class e{constructor(e,t){this.element=e,this.menu=t,this.init()}bindToDOM(){this.burgerClose=this.menu.querySelector(".nav-top__close"),this.menuLinks=this.menu.querySelectorAll(".nav-top__link")}init(){this.bindToDOM(),this.addEventListeners()}addEventListeners(){this.element.addEventListener("click",(()=>{this.menu.classList.toggle("header__nav-wrapper--active"),document.body.classList.toggle("stop-scroll")})),this.menuLinks.forEach((e=>{e.addEventListener("click",(()=>{this.menu.classList.remove("header__nav-wrapper--active"),document.body.classList.remove("stop-scroll")}))})),this.burgerClose.addEventListener("click",(()=>{this.menu.classList.remove("header__nav-wrapper--active"),document.body.classList.remove("stop-scroll")}))}}class t{constructor(e){this.element=e,this.init()}bindToDOM(){this.openSearch=this.element.querySelector(".search__btn"),this.form=this.element.querySelector(".search__form")}init(){this.bindToDOM(),this.addEventListeners()}addEventListeners(){this.openSearch.addEventListener("click",(()=>{this.form.classList.add("search__form--active"),this.openSearch.classList.add("search__btn--active")})),document.addEventListener("click",(e=>{let t=e.target;t.closest(".search__form")||t.closest(".search__btn")||(this.form.classList.remove("search__form--active"),this.openSearch.classList.remove("search__btn--active"))}))}}class s{constructor(e){this.element=e,this.init()}bindToDOM(){this.primaryBtn=this.element.querySelectorAll(".primary-broadcast__button"),this.secondaryBtn=this.element.querySelectorAll(".secondary-broadcast__button"),this.broadcastBtn=this.element.querySelectorAll(".header__broadcast-btn"),this.searchEl=this.element.querySelector(".search")}init(){this.bindToDOM(),this.addEventListeners(),this.search=new t(this.searchEl)}addEventListeners(){this.secondaryBtn.forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("broadcast-btn--toggle")}))})),this.primaryBtn.forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("broadcast-btn--toggle")}))})),this.broadcastBtn.forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("broadcast-btn--toggle")}))}))}}class i{constructor(e){this.element=e,this.init()}bindToDOM(){this.btns=this.element.querySelectorAll(".podcast__btn"),this.items=this.element.querySelectorAll(".podcasts__item"),this.btnMore=this.element.querySelector(".podcasts__btn")}init(){this.bindToDOM(),this.addEventListeners()}addEventListeners(){this.btns.forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("podcast__btn--toggle")}))})),this.btnMore.addEventListener("click",(()=>{this.items.forEach((e=>{e.classList.add("podcasts__item--visible"),this.btnMore.classList.add("podcasts__btn--hidden")}))}))}}class r{constructor(e){this.element=e,this.init()}bindToDOM(){this.items=this.element.querySelectorAll(".guests__tab"),this.btns=this.element.querySelectorAll(".guests__ac-item-btn")}init(){this.bindToDOM(),this.addEventListeners()}addEventListeners(){this.btns.forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.dataset.path;this.btns.forEach((e=>{e.classList.remove("guests__ac-item-btn--active")})),e.currentTarget.classList.add("guests__ac-item-btn--active"),this.items.forEach((e=>{e.classList.remove("guests__tab--active")})),this.element.querySelector(`[data-target="${t}"]`).classList.add("guests__tab--active"),this.scrollToContent(this,!0)}))}))}scrollToContent(e,t){if(t&&this.getWindowWidth()>576)return;const s=e.dataset.scroll,i=document.getElementById(s).getBoundingClientRect().top;window.scrollBy({top:i,behavior:"smooth"})}getWindowWidth(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)}}class o{constructor(e,t,s,i){this.form=e,this.options=t,this.fields=s,this.onSuccess=i,this.init()}init(){this.validate(),this.addFields(),this.onSuccessHandler()}validate(){this.validation=new JustValidate(this.form,this.options)}addFields(){for(const e of this.fields)this.validation.addField(e.id,e.rules)}onSuccessHandler(){void 0!==this.onSuccess&&this.validation.onSuccess((()=>this.onSuccess()))}}class a{constructor(e,t){this.element=e,this.openPopUp=t,this.init()}bindToDOM(){this.closePopUp=this.element.querySelector(".pop-up__close-btn"),this.wrapper=this.element.querySelector(".pop-up__wrapper"),this.form=this.element.querySelector(".pop-up__form")}init(){this.bindToDOM(),this.addEventListeners(),this.formValidator()}addEventListeners(){this.openPopUp.addEventListener("click",(()=>{this.element.classList.toggle("pop-up--visible"),this.wrapper.classList.toggle("pop-up__wrapper--visible"),document.body.classList.toggle("stop-scroll")})),this.closePopUp.addEventListener("click",(()=>{this.element.classList.remove("pop-up--visible"),this.wrapper.classList.remove("pop-up__wrapper--visible"),document.body.classList.remove("stop-scroll")}))}formValidator(){this.validator=new o(this.form,{successFieldCssClass:"is-valid",errorFieldCssClass:"is-invalid",errorLabelCssClass:"is-label-invalid",errorLabelStyle:{color:"#D52B1E"}},[{id:"#login",rules:[{rule:"required",errorMessage:"Вы не ввели логин"},{rule:"minLength",value:2,errorMessage:"Поле должно содержать минимум :value символов"},{rule:"maxLength",value:30,errorMessage:"Поле должно содержать максимум :value символов"}]},{id:"#password",rules:[{rule:"required",errorMessage:"Вы не ввели пароль"},{rule:"minLength",value:5,errorMessage:"Пароль должен содержать минимум :value символов"},{rule:"maxLength",value:30,errorMessage:"Пароль должен содержать максимум :value символов"},{rule:"password",errorMessage:"Пароль должен содержать не меньше одной буквы или цифры"}]}],(()=>{this.form.reset()}))}}const l=document.querySelector("#root");new class{constructor(e){this.element=e}bindToDOM(){this.accordionEl=this.element.querySelector(".accordion-container"),this.guestsAccordionEl=this.element.querySelector(".guests__ac-container"),this.headerEl=this.element.querySelector(".header"),this.burgerEl=this.headerEl.querySelector(".burger"),this.burgerMenu=this.headerEl.querySelector(".header__nav-wrapper"),this.podcastsSection=this.element.querySelector(".podcasts"),this.playlistsSwiperEl=this.element.querySelector(".playlists__swiper"),this.aboutSwiperEl=this.element.querySelector(".about__swiper"),this.guestsSection=this.element.querySelector(".guests"),this.modalEl=this.element.querySelector(".pop-up"),this.modalOpenBtn=this.headerEl.querySelector(".header__desktop-btn"),this.aboutForm=this.element.querySelector(".about__form"),this.broadcastSelect=this.element.querySelector(".broadcasts__select")}init(){this.bindToDOM(),this.accordion=new Accordion(this.accordionEl,{duration:400}),this.guestsAccordion=new Accordion(this.guestsAccordionEl,{duration:400,openOnInit:[0]}),this.burger=new e(this.burgerEl,this.burgerMenu),this.header=new s(this.headerEl),this.podcast=new i(this.podcastsSection),this.playlistsSwiper=new Swiper(this.playlistsSwiperEl,{slidesPerView:"auto",grabCursor:!0,spaceBetween:16}),this.aboutSwiper=new Swiper(this.aboutSwiperEl,{slidesPerView:4,grabCursor:!0,spaceBetween:30,breakpoints:{1281:{slidesPerView:4},577:{slidesPerView:2,spaceBetween:30},320:{slidesPerView:"auto",spaceBetween:20}},navigation:{nextEl:".about__slider-btn--next",prevEl:".about__slider-btn--prev"},a11y:{prevSlideMessage:"К предыдущему слайду",nextSlideMessage:"К следующему слайду"}}),this.tabs=new r(this.guestsSection),this.modal=new a(this.modalEl,this.modalOpenBtn),this.formValidator(),this.choices=new Choices(this.broadcastSelect,{searchEnabled:!1,itemSelectText:"",allowHTML:!0})}formValidator(){this.aboutValidator=new o(this.aboutForm,{successFieldCssClass:"is-valid",errorFieldCssClass:"is-invalid",errorLabelCssClass:"is-label-invalid",errorLabelStyle:{color:"#D52B1E"}},[{id:"#name",rules:[{rule:"required",errorMessage:"Вы не ввели имя"},{rule:"minLength",value:2,errorMessage:"Поле должно содержать минимум :value символов"},{rule:"maxLength",value:12,errorMessage:"Поле должно содержать максимум :value символов"},{rule:"customRegexp",value:"^[a-zA-Zа-яА-Я -]+$",errorMessage:"Недопустимый формат"}]},{id:"#email",rules:[{rule:"required",errorMessage:"Вы не ввели e-mail"},{rule:"email",errorMessage:"Пожалуйста, введите действительный e-mail"}]},{id:"#agree",rules:[{rule:"required",errorMessage:"Обязательное согласие"}]}],(()=>{this.aboutForm.reset()}))}}(l).init()})();